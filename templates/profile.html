<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; font-family: 'Inter', sans-serif; }

body {
  margin: 0;
  background: #eaf3ff;
  display: flex;
  min-height: 100vh;
}

/* ===== SIDEBAR (–¢–û–ß–ù–û –Ø–ö HOME) ===== */
.sidebar {
  width: 240px;
  background: #f2f4f7;
  padding: 30px 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.logo {
  text-align: center;
  margin-bottom: 40px;
}

.logo img {
  width: 90px;
}

.nav {
  display: flex;
  flex-direction: column;
  gap: 22px;
}

.nav a {
  text-decoration: none;
  color: #333;
  font-size: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.profile-link {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: #333;
}

.profile-link img {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  object-fit: cover;
}

/* ===== MAIN ===== */
.main {
  flex: 1;
  padding: 30px;
}

.bio-hint {
  font-size: 12px;
  color: #2c2c2c;
  opacity: 0.7;
  margin-top: 6px;
  max-width: 420px;
  line-height: 1.4;
  text-align: left;
  margin-left: auto;
  margin-right: auto;
}

/* ===== PROFILE CARD ===== */
.profile-card {
  background: transparent;
  border-radius: 0;
  padding: 30px 40px;
}

/* HEADER */
.profile-header h2 {
  margin: 0;
  font-size: 22px;
  font-weight: 700;
}

.actions {
  display: flex;
  gap: 12px;
  margin-bottom: 56px;
}

.actions button {
  padding: 10px 18px;
  border-radius: 12px;
  border: none;
  font-weight: 600;
  cursor: pointer;
}

.cancel {
  background: #eef3fa;
}

.save {
  background: #0b2c86;
  color: #fff;
}

/* GRID */
.profile-grid {
  display: grid;
  grid-template-columns: 260px 1fr 1fr;
  gap: 24px;
}

/* PHOTO */
.photo-block {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.photo-block img,
.photo-placeholder {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 16px;
}

.section {
  margin-bottom: 18px;
}

.photo-block button {
  width: 100%;
  padding: 10px;
  border-radius: 12px;
  border: none;
  background: #0b2c86;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 8px;
}

.photo-block input {
  display: none;
}

.photo-placeholder {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  background: #eef3fa;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  color: #0b2c86;
  font-weight: 600;
  margin-bottom: 12px;
}

.sidebar-avatar {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: #d0d8e6;
}

/* FIELDS */
label {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 6px;
  display: block;
}

input, textarea {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  margin-bottom: 16px;
  background: #fff;
  font-size: 14px;
}

textarea {
  min-height: 110px;
  resize: none;
}

.logout-btn {
  padding: 10px 18px;
  border-radius: 12px;
  background: #ffe3e3;
  color: #b30000;
  font-weight: 600;
  font-size: 14px;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
}

.logout-btn:hover {
  background: #ffcccc;
}

.chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 10px;
}

.chip {
  background: #fff;
  border-radius: 999px;
  padding: 8px 14px;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: default;
}

.chip span {
  font-weight: 600;
}

.chip button {
  background: none;
  border: none;
  font-size: 14px;
  cursor: pointer;
  color: #666;
}

.add-chip {
  background: #eaf1ff;
  font-weight: 700;
  cursor: pointer;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 10px;
}

.add-plus {
  width: 26px;
  height: 26px;
  border-radius: 8px;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
}
.dropdown {
  background: #fff;
  border-radius: 14px;
  padding: 8px;
  margin-top: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,.12);
  max-width: 300px;
}

.dropdown.hidden {
  display: none;
}

.dropdown-item {
  padding: 8px 12px;
  border-radius: 10px;
  font-size: 13px;
  cursor: pointer;
}

.dropdown-item:hover {
  background: #eaf1ff;
}

.birth-row {
  display: flex;
  gap: 5px;
  margin-bottom: 18px;
}

.birth-row select {
  flex: 1;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: #fff;
}

.gender-switch {
  display: flex;
  background: #e3ebf5;
  border-radius: 14px;
  padding: 4px;
  margin-bottom: 18px;
  width: 100%;
  max-width: 420px;
}

.gender-option {
  flex: 1;
  text-align: center;
  padding: 12px 0;
  border-radius: 12px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  color: #333;
  transition: .18s;
}

.gender-option.active {
  background: #0b2c86;
  color: white;
  box-shadow: 0 6px 18px rgba(11,44,134,.25);
}

.gender-option:hover {
  opacity: .85;
}

.actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 56px;
}

.left-actions {
  display: flex;
  gap: 12px;
}


/* –ë–Ü–õ–ò–ô –•–ï–î–ï–† */
.profile-header {
  background: #ffffff;
  padding: 18px 28px;
  border-radius: 18px;
  margin-bottom: 28px;
  box-shadow: 0 10px 25px rgba(0,0,0,.08);
}

/* –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ */
.actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.left-actions {
  display: flex;
  gap: 12px;
}

.sidebar-bottom{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.logout-link{
  margin-top:10px;
  padding:10px;
  border-radius:12px;
  background:#ffe3e3;
  color:#b30000;
  text-decoration:none;
  font-weight:600;
  text-align:center;
}

.login-link, .register-link{
  padding:10px;
  border-radius:12px;
  background:#132c74;
  color:white;
  text-decoration:none;
  text-align:center;
  font-weight:600;
}


/* SIDEBAR */
.sidebar {
  width: 240px;
  background: #f2f4f7;
  padding: 30px 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.logo {
  text-align: center;
  margin-bottom: 40px;
}

.logo h2 {
  margin: 6px 0 0;
  font-size: 20px;
  font-weight: 700;
  color: #111;
}

.nav {
  display: flex;
  flex-direction: column;
  gap: 22px;
}

.nav a {
  text-decoration: none;
  color: #333;
  font-size: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.profile {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: #333;
}

.profile img {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  object-fit: cover;
}




</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <div>
  <div class="logo">
    <img src="/images/logo.png" alt="SoulLink" class="logo-img">
  </div>

    <div class="nav">

      <a href="{% if request.session.user_id %}/dating/{% else %}/login/{% endif %}">
        üè† –ó–Ω–∞–π–æ–º—Å—Ç–≤–∞
      </a>

      <a href="{% if request.session.user_id %}/sympathy{% else %}/login/{% endif %}">
        üîó –°–∏–º–ø–∞—Ç—ñ—ó
      </a>

      <a href="{% if request.session.user_id %}/likes/{% else %}/login/{% endif %}">
        ü§ç –õ–∞–π–∫–∏
      </a>

    </div>
</div>

<a href="/profile/" class="profile">
  {% if user and user.photo %}
    <img src="{{ user.photo.url }}" alt="Profile photo">
  {% else %}
    <div class="sidebar-avatar"></div>
  {% endif %}
  <span>{{ user.name|default:"–ü—Ä–æ—Ñ—ñ–ª—å" }}</span>
</a>
</div>

<!-- MAIN -->
<div class="main">

<form method="POST" enctype="multipart/form-data">
{% csrf_token %}

<div class="profile-card">

  <!-- HEADER -->
<div class="actions">

  <div class="left-actions">
    <button type="button" class="cancel" onclick="location.href='/'">
      –°–∫–∞—Å—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏
    </button>

    <button type="submit" class="save">
      –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏
    </button>
  </div>

  <a href="/logout/" class="logout-btn">–í–∏–π—Ç–∏</a>

</div>

  <!-- GRID -->
  <div class="profile-grid">

<!-- PHOTO -->
<div class="photo-block">

  {% if user.photo %}
    <img id="photoPreview" src="{{ user.photo.url }}">
  {% else %}
    <div id="photoPreview" class="photo-placeholder">+</div>
  {% endif %}

  <label>
    <button type="button" onclick="document.getElementById('photoInput').click()">
      –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–µ —Ñ–æ—Ç–æ
    </button>
    <input
      type="file"
      name="photo"
      id="photoInput"
      accept="image/*"
      style="display:none"
    >
  </label>

</div>

<!-- COL 1 -->
<div>

  <label>–Ü–º º—è</label>
  <input name="name" value="{{ user.name }}">

<label>–°—Ç–∞—Ç—å</label>

<div class="gender-switch">
  <div class="gender-option {% if user.gender != '–ñ—ñ–Ω–∫–∞' %}active{% endif %}" data-value="–ß–æ–ª–æ–≤—ñ–∫">
    –ß–æ–ª–æ–≤—ñ–∫
  </div>
  <div class="gender-option {% if user.gender == '–ñ—ñ–Ω–∫–∞' %}active{% endif %}" data-value="–ñ—ñ–Ω–∫–∞">
    –ñ—ñ–Ω–∫–∞
  </div>
</div>

<input type="hidden" name="gender" id="genderInput" value="{{ user.gender|default:'–ß–æ–ª–æ–≤—ñ–∫' }}">


  <label>–ú—ñ—Å—Ç–æ</label>
  <input name="city" value="{{ user.city }}">

  <label>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
  <div class="birth-row">

    <select name="birth_day">
      {% for d in days %}
        <option value="{{ d }}" {% if user.birth_date and user.birth_date.day == d %}selected{% endif %}>
          {{ d|stringformat:"02d" }}
        </option>
      {% endfor %}
    </select>

    <select name="birth_month">
      {% for m in months %}
        <option value="{{ m.0 }}" {% if user.birth_date and user.birth_date.month == m.0 %}selected{% endif %}>
          {{ m.1 }}
        </option>
      {% endfor %}
    </select>

    <select name="birth_year">
      {% for y in years %}
        <option value="{{ y }}" {% if user.birth_date and user.birth_date.year == y %}selected{% endif %}>
          {{ y }}
        </option>
      {% endfor %}
    </select>

  </div>

</div>


<!-- ===== COL 2 (–í–ò–ü–†–ê–í–õ–ï–ù–û –í–Ü–î–°–¢–£–ü–ò) ===== -->
<div>

  <!-- BIO -->
  <div style="margin-bottom:30px;">
    <label>–ü—Ä–æ –º–µ–Ω–µ</label>
    <textarea name="bio">{{ user.bio }}</textarea>

    <div class="bio-hint" style="margin-top:10px;">
      –ù–µ –≤–∫–∞–∑—É–π –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, —Å–≤–æ—ó —Å–æ—Ü–º–µ—Ä–µ–∂—ñ, —ñ–Ω—Ç–∏–º–Ω—ñ –≤–ø–æ–¥–æ–±–∞–Ω–Ω—è —Ç–∞ —ñ–Ω—à–µ,
      —â–æ –Ω–µ –≤—Ö–æ–¥–∏—Ç—å —É –Ω–∞—à—ñ –ø—Ä–∞–≤–∏–ª–∞ —Å–ø—ñ–ª—å–Ω–æ—Ç–∏. –¢–∞–∫–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–∞.
    </div>
  </div>


  <!-- INTERESTS -->
  <div style="margin-bottom:30px;">
    <label class="section-title">
      –Ü–Ω—Ç–µ—Ä–µ—Å–∏
      <span id="addInterest" class="add-plus">+</span>
    </label>

    <div class="chips" id="interestsChips"></div>

    <div id="interestDropdown" class="dropdown hidden">
      <div class="dropdown-item">–ú–∏—Å—Ç–µ—Ü—Ç–≤–æ</div>
      <div class="dropdown-item">–ö—ñ–Ω–æ</div>
      <div class="dropdown-item">–á–∂–∞</div>
      <div class="dropdown-item">–ú—É–∑–∏–∫–∞</div>
      <div class="dropdown-item">–ö–Ω–∏–≥–∏</div>
      <div class="dropdown-item">–°–ø–æ—Ä—Ç</div>
      <div class="dropdown-item">–Ü–≥—Ä–∏</div>
      <div class="dropdown-item">–ü–æ–¥–æ—Ä–æ–∂—ñ</div>
      <div class="dropdown-item">–§–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—è</div>
      <div class="dropdown-item">–í–µ–ª–æ—Å–ø–æ—Ä—Ç</div>
      <div class="dropdown-item">–¢–µ–∞—Ç—Ä</div>
      <div class="dropdown-item">–í–µ—á—ñ—Ä–∫–∏</div>
    </div>

    <input type="hidden" name="interests" id="interestsInput">
  </div>


  <!-- LIFESTYLE -->
  <div style="margin-bottom:30px;">
    <label class="section-title">
      –°—Ç–∏–ª—å –∂–∏—Ç—Ç—è
      <span id="addLifestyle" class="add-plus">+</span>
    </label>

    <div class="chips" id="lifestyleChips"></div>

    <div id="lifestyleDropdown" class="dropdown hidden">
      <div class="dropdown-item">–ê–∫—Ç–∏–≤–Ω–∏–π</div>
      <div class="dropdown-item">–î–æ–º–∞—à–Ω—ñ–π</div>
      <div class="dropdown-item">–¢–≤–æ—Ä—á–∏–π</div>
      <div class="dropdown-item">–°–æ—Ü—ñ–∞–ª—å–Ω–∏–π</div>
      <div class="dropdown-item">–°–ø–æ—Ä—Ç—Å–º–µ–Ω</div>
      <div class="dropdown-item">–¢—É—Å–æ–≤—â–∏–∫</div>
      <div class="dropdown-item">–†–æ–∑–º—ñ—Ä–µ–Ω–∏–π</div>
      <div class="dropdown-item">–ú–∞–Ω–¥—Ä—ñ–≤–Ω–∏–∫</div>
    </div>

    <input type="hidden" name="lifestyle" id="lifestyleInput">
  </div>

</div>


</form>
</div>

<script>
const input = document.getElementById('photoInput');
const preview = document.getElementById('photoPreview');

if (input) {
  input.addEventListener('change', () => {
    const file = input.files[0];
    if (!file) return;

    const url = URL.createObjectURL(file);

    // —è–∫—â–æ –≤–∂–µ —î <img>
    if (preview.tagName === 'IMG') {
      preview.src = url;
    } else {
      const img = document.createElement('img');
      img.src = url;
      img.id = 'photoPreview';
      img.style.width = '140px';
      img.style.height = '140px';
      img.style.borderRadius = '50%';
      img.style.objectFit = 'cover';

      preview.replaceWith(img);
    }
  });
}
</script>


<script>
const chipsBox = document.getElementById("interestsChips");
const addBtn = document.getElementById("addInterest");
const dropdown = document.getElementById("interestDropdown");
const hiddenInput = document.getElementById("interestsInput");

let selected = "{{ user.interests|default:'' }}"
  .split(",")
  .map(i => i.trim())
  .filter(Boolean);

function render() {
  chipsBox.innerHTML = "";
  selected.forEach(val => {
    const chip = document.createElement("div");
    chip.className = "chip";
    chip.innerHTML = `<span>${val}</span><button type="button">√ó</button>`;
    chip.querySelector("button").onclick = () => {
      selected = selected.filter(i => i !== val);
      update();
    };
    chipsBox.appendChild(chip);
  });
}

function update() {
  hiddenInput.value = selected.join(", ");
  render();
}

addBtn.onclick = () => {
  dropdown.classList.toggle("hidden");
};

document.querySelectorAll(".dropdown-item").forEach(item => {
  item.onclick = () => {
    const value = item.textContent;
    if (!selected.includes(value)) {
      selected.push(value);
      update();
    }
    dropdown.classList.add("hidden");
  };
});

update();


// -------- LIFESTYLE --------
const lifestyleBox = document.getElementById("lifestyleChips");
const lifestyleBtn = document.getElementById("addLifestyle");
const lifestyleDropdown = document.getElementById("lifestyleDropdown");
const lifestyleInput = document.getElementById("lifestyleInput");

let lifestyle = "{{ user.lifestyle|default:'' }}"
  .split(",")
  .map(i => i.trim())
  .filter(Boolean);

function renderLifestyle() {
  lifestyleBox.innerHTML = "";
  lifestyle.forEach(val => {
    const chip = document.createElement("div");
    chip.className = "chip";
    chip.innerHTML = `<span>${val}</span><button type="button">√ó</button>`;
    chip.querySelector("button").onclick = () => {
      lifestyle = lifestyle.filter(i => i !== val);
      updateLifestyle();
    };
    lifestyleBox.appendChild(chip);
  });
}

function updateLifestyle() {
  lifestyleInput.value = lifestyle.join(", ");
  renderLifestyle();
}

lifestyleBtn.onclick = () => {
  lifestyleDropdown.classList.toggle("hidden");
};

lifestyleDropdown.querySelectorAll(".dropdown-item").forEach(item => {
  item.onclick = () => {
    const value = item.textContent;
    if (!lifestyle.includes(value)) {
      lifestyle.push(value);
      updateLifestyle();
    }
    lifestyleDropdown.classList.add("hidden");
  };
});

updateLifestyle();
</script>

<script>
const genderOptions = document.querySelectorAll(".gender-option");
const genderInput = document.getElementById("genderInput");

genderOptions.forEach(btn=>{
  btn.onclick=()=>{
    genderOptions.forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    genderInput.value=btn.dataset.value;
  };
});
</script>




</body>
</html>
