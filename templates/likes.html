<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Лайки</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --page-bg:#D0E6FD;
  --sidebar-bg:#f4f5f6;
  --text:#0f1114;
  --green:#17c344;
  --red:#ef4338;
  --accent:#0A1B58;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Montserrat',sans-serif}
body{background:var(--page-bg);color:var(--text)}
.layout{min-height:100vh;display:grid;grid-template-columns:336px 1fr}

.sidebar{background:var(--sidebar-bg);border-right:1px solid #dde2ea;padding:42px 44px 34px;display:flex;flex-direction:column;justify-content:space-between}
.logo{display:flex;justify-content:center;margin-bottom:40px}
.logo-img{width:130px;height:auto}
.nav{display:flex;flex-direction:column;gap:38px}
.nav a{text-decoration:none;display:flex;align-items:center;gap:18px}
.nav a img{width:32px;height:32px;object-fit:contain;opacity:.72}
.nav-text{color:#4a515c;font-size:19px;line-height:24px;font-weight:500;letter-spacing:-0.18px}
.nav a.active .nav-text{color:#0f1114;font-weight:600}
.nav a.active img{opacity:1}
.profile{display:flex;align-items:center;gap:12px;text-decoration:none;color:#2d3138}
.profile img,.sidebar-avatar{width:52px;height:52px;border-radius:50%;object-fit:cover}
.sidebar-avatar{background:#d4d9e1}
.profile-name{font-size:19px;line-height:24px;font-weight:500;letter-spacing:-0.18px}

.main{padding:46px 38px 24px;position:relative}
.header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:24px}
.header h1{font-size:36px;line-height:42px;margin-bottom:8px;font-weight:700;letter-spacing:-0.2px}
.count{font-size:24px;line-height:32px;font-weight:500;color:#2d3540}
.filter-btn{margin-top:6px;border:none;background:transparent;cursor:pointer}
.filter-icon{width:42px;height:42px;object-fit:contain}

.grid{display:grid;grid-template-columns:repeat(5,minmax(220px,1fr));gap:18px}
.card{position:relative;min-height:430px;border-radius:22px;overflow:hidden;background:#a2b5cb;box-shadow:0 10px 20px rgba(0,0,0,.2)}
.card img{width:100%;height:100%;object-fit:cover;display:block}
.card::after{content:"";position:absolute;left:0;right:0;bottom:0;height:44%;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.82) 100%)}
.story-bars{position:absolute;top:14px;left:14px;right:14px;display:grid;grid-template-columns:repeat(4,1fr);gap:8px;z-index:2}
.story-bars span{height:3px;border-radius:5px;background:rgba(255,255,255,.6)}
.slide-arrow{position:absolute;top:50%;transform:translateY(-50%);z-index:2;color:rgba(255,255,255,.88);font-size:30px;font-weight:300;pointer-events:none}
.slide-arrow.left{left:12px}.slide-arrow.right{right:12px}
.card-info{position:absolute;left:16px;right:16px;bottom:18px;z-index:3}
.activity{display:flex;align-items:center;gap:7px;color:rgba(255,255,255,.93);font-size:13px;line-height:18px;font-weight:500}
.dot{width:9px;height:9px;border-radius:50%;background:var(--green)}
.name-row{margin-top:8px;display:flex;align-items:center;gap:8px;color:#fff}
.name{font-size:18px;line-height:24px;font-weight:600;text-shadow:0 2px 5px rgba(0,0,0,.22)}
.check{width:22px;height:22px;display:flex;align-items:center;justify-content:center}
.check img{width:22px;height:22px;object-fit:contain}
.actions{margin-top:18px;display:flex;justify-content:center;gap:16px}
.actions form{margin:0}
.action-btn{width:48px;height:48px;border:none;border-radius:50%;background:#fff;cursor:pointer;box-shadow:0 7px 16px rgba(0,0,0,.24);display:flex;align-items:center;justify-content:center}
.action-btn svg{width:24px;height:24px;fill:none;stroke-linecap:round;stroke-linejoin:round}
.action-btn img{width:24px;height:24px;object-fit:contain}
.action-btn.reject svg{stroke:var(--red);stroke-width:1.8}

.empty{min-height:66vh;display:flex;align-items:center;justify-content:center;text-align:center}
.empty h2{font-size:28px;line-height:36px;font-weight:600;margin-bottom:16px;letter-spacing:-0.2px}
.empty a{display:inline-block;background:var(--accent);color:#fff;text-decoration:none;border-radius:14px;padding:11px 34px;font-size:18px;line-height:24px;font-weight:500}

.chat-fab{position:fixed;right:34px;bottom:30px;z-index:10;background:#fff;color:#1f1f1f;text-decoration:none;border-radius:999px;box-shadow:0 18px 34px rgba(0,0,0,.2);display:flex;align-items:center;gap:12px;padding:14px 26px;min-width:420px}
.chat-fab-icon{width:25px;height:25px;object-fit:contain}
.chat-fab-text{font-size:20px;line-height:24px;font-weight:500}

@media (max-width:1600px){.grid{grid-template-columns:repeat(4,minmax(210px,1fr));}}
@media (max-width:1320px){
  .layout{grid-template-columns:96px 1fr}
  .sidebar{padding:22px 16px}
  .logo{margin-bottom:18px}.logo-img{width:54px}
  .nav{gap:22px;align-items:center}
  .nav-text,.profile-name{display:none}
  .profile{justify-content:center}
  .grid{grid-template-columns:repeat(3,minmax(180px,1fr))}
}
@media (max-width:920px){
  .layout{grid-template-columns:1fr}
  .sidebar{display:block;border-bottom:1px solid rgba(0,0,0,.06);padding:14px}
  .logo{margin-bottom:12px}.logo-img{width:86px}
  .nav{flex-direction:row;flex-wrap:wrap;justify-content:center;gap:10px;margin-bottom:12px}
  .nav a{background:#fff;border-radius:12px;padding:8px 10px}
  .nav a img{width:20px;height:20px}
  .nav-text{display:inline;font-size:14px;line-height:20px;font-weight:600}
  .profile{justify-content:center}.profile-name{display:inline;font-size:14px;line-height:20px}
  .main{padding:20px 12px 86px}
  .header h1{font-size:38px;margin-bottom:8px}
  .count{font-size:20px;line-height:24px}
  .grid{grid-template-columns:repeat(2,minmax(150px,1fr));gap:12px}
  .card{min-height:320px;border-radius:18px}
  .activity{font-size:12px;line-height:16px}
  .dot{width:10px;height:10px}
  .name{font-size:16px;line-height:20px}
  .check,.check img{width:20px;height:20px}
  .action-btn{width:40px;height:40px}
  .action-btn svg,.action-btn img{width:20px;height:20px}
  .empty h2{font-size:28px;line-height:36px}
  .empty a{font-size:16px;line-height:22px;padding:12px 22px}
  .chat-fab{left:12px;right:12px;bottom:12px;justify-content:center}
  .chat-fab-text{font-size:18px;line-height:22px}
}
</style>
</head>
<body>
<div class="layout">
  <aside class="sidebar">
    <div>
      <div class="logo"><img src="/images/logo.png" alt="SoulLink" class="logo-img"></div>
      <nav class="nav">
        <a href="{% if request.session.user_id %}/dating/{% else %}/login/{% endif %}">
          <img src="/images/icons/codicon_home.svg" alt="">
          <span class="nav-text">Знайомства</span>
        </a>
        <a href="{% if request.session.user_id %}/sympathy{% else %}/login/{% endif %}">
          <img src="/images/icons/system-uicons_chain.svg" alt="">
          <span class="nav-text">Симпатії</span>
        </a>
        <a class="active" href="{% if request.session.user_id %}/likes/{% else %}/login/{% endif %}">
          <img src="/images/icons/solar_heart-linear.svg" alt="">
          <span class="nav-text">Лайки</span>
        </a>
        <a href="/messages/"><img src="/images/icons/ph_paper-plane-tilt-light.svg" alt=""><span class="nav-text">Повідомлення</span></a>
      </nav>
    </div>
    <a href="/profile/" class="profile">
      {% if current_user and current_user.photo %}<img src="{{ current_user.photo.url }}" alt="{{ current_user.name }}">{% else %}<div class="sidebar-avatar"></div>{% endif %}
      <span class="profile-name">Профіль</span>
    </a>
  </aside>

  <main class="main">
    <div class="header">
      <div>
        <h1>Лайки</h1>
        <div class="count">{{ profiles|length }} лайки</div>
      </div>
      <button class="filter-btn" type="button" aria-label="Фільтри">
        <img class="filter-icon" src="/images/icons/mage_filter.svg" alt="">
      </button>
    </div>

    {% if like_cards %}
      <section class="grid">
        {% for item in like_cards %}
          <article class="card">
            {% if item.profile.photo %}<img src="{{ item.profile.photo.url }}" alt="{{ item.profile.name }}">{% else %}<img src="/images/no-image.png" alt="No image">{% endif %}
            <div class="story-bars"><span></span><span></span><span></span><span></span></div>
            <div class="slide-arrow left">&lsaquo;</div><div class="slide-arrow right">&rsaquo;</div>
            <div class="card-info">
              <div class="activity"><span class="dot"></span><span>Остання активність</span></div>
              <div class="name-row">
                <span class="name">{{ item.profile.name }}{% if item.age %} | {{ item.age }}{% endif %}</span>
                <span class="check" aria-hidden="true"><img src="/images/icons/grommet-icons_status-good.svg" alt=""></span>
              </div>
              <div class="actions">
                <form method="POST" action="/reject/{{ item.profile.id }}/">{% csrf_token %}
                  <button class="action-btn reject" type="submit" aria-label="Відхилити"><svg viewBox="0 0 24 24"><path d="M5 5 19 19"/><path d="M19 5 5 19"/></svg></button>
                </form>
                <form method="POST" action="/accept/{{ item.profile.id }}/">{% csrf_token %}
                  <button class="action-btn accept" type="submit" aria-label="Прийняти"><img src="/images/icons/solar_heart-linear.svg" alt=""></button>
                </form>
              </div>
            </div>
          </article>
        {% endfor %}
      </section>
    {% elif profiles %}
      <section class="grid">
        {% for p in profiles %}
          <article class="card">
            {% if p.photo %}<img src="{{ p.photo.url }}" alt="{{ p.name }}">{% else %}<img src="/images/no-image.png" alt="No image">{% endif %}
            <div class="story-bars"><span></span><span></span><span></span><span></span></div>
            <div class="slide-arrow left">&lsaquo;</div><div class="slide-arrow right">&rsaquo;</div>
            <div class="card-info">
              <div class="activity"><span class="dot"></span><span>Остання активність</span></div>
              <div class="name-row">
                <span class="name">{{ p.name }}</span>
                <span class="check" aria-hidden="true"><img src="/images/icons/grommet-icons_status-good.svg" alt=""></span>
              </div>
              <div class="actions">
                <form method="POST" action="/reject/{{ p.id }}/">{% csrf_token %}
                  <button class="action-btn reject" type="submit" aria-label="Відхилити"><svg viewBox="0 0 24 24"><path d="M5 5 19 19"/><path d="M19 5 5 19"/></svg></button>
                </form>
                <form method="POST" action="/accept/{{ p.id }}/">{% csrf_token %}
                  <button class="action-btn accept" type="submit" aria-label="Прийняти"><img src="/images/icons/solar_heart-linear.svg" alt=""></button>
                </form>
              </div>
            </div>
          </article>
        {% endfor %}
      </section>
    {% else %}
      <div class="empty">
        <div>
          <h2>{% if current_user and current_user.gender == "Чоловік" %}Поки ти нікому не відгукнувся.{% else %}Поки ти нікому не відгукнулася.{% endif %}</h2>
          <a href="/dating/">Перейти до знайомств</a>
        </div>
      </div>
    {% endif %}
  </main>
</div>

<a href="/messages/" class="chat-fab" aria-label="Повідомлення">
  <img class="chat-fab-icon" src="/images/icons/ph_paper-plane-tilt-light.svg" alt="">
  <span class="chat-fab-text">Повідомлення</span>
</a>
</body>
</html>
